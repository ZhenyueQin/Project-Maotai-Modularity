\section{Methods}
This is where we describe what we're going to do. As discussed previously, 
we don't mention symmetry or noisy evaluation in this paper, nor do we cover 
hotspots, diploidy or dominance.

What we do work with is a basic GA with mutation as per previous work, and cross
over. The variations are:

Espinosa Soto vs Larson fitness function
Fitness proportionate (roulette) selection vs tournament (maybe a couple of different tournament sizes)

We may end up merging this with the experiments section

We utilize genetic algorithms as our evolutionary simulation tools. The gene regulatory network that we used in this paper was originally proposed by Wagner \cite{wagner1996model} and customized by Espinosa-Soto and Wagner \cite{espinosa2010specialization} as well as Larson et al. \cite{larson2016hotspot}. 

All simulation code was implemented in Java 1.8.0 and Python 2.7.10. They are all publicly available at https://github.com/xxxxxxxxxx. Modularity was evaluated using the NetworkX package with the community API \cite{communityAPI}. All the generated data can be downloaded at: https://drive.google.com/file/xxxxxxxxxxxxxxxxxx. 

\subsection{Model}
Cells in an organism display heterogeneity in functionalities and morphologies, while they contain the same set of genes. In other words, cells interpret the same genetic material in different ways so that their behaviours and structures vary. These distinct interpretations are due to the regulation via the activation and repression of genes \cite{wagner1996model}. In brief, effects of different genes are not mutually independent. A protein that is generated by a gene may activate or repress other genes. A gene regulatory network can be a mathematical directed graph to express these relationships of genes in an organism \cite{wagner1996model}. Specifically, genes can have two different patterns, namely activation and repression. The term "gene activity pattern" is adopted to represent the activeness status of the entire set of genes. Different gene activity patterns mean the distinct cellular functions and forms \cite{espinosa2010specialization}. 

We re-constructed the model that was utilized in the work done by Espinosa-Soto and Wagner, which is a model to represent a gene regulatory network \cite{espinosa2010specialization}. In this model, a gene regulatory network with $N$ genes will be in the form of an adjacency matrix $A = a_{ji}$, which acts as a genotype of an individual. Each entry $a_{ji}$ is restricted to be either 1, 0 or -1, which represents an activation, absence or repression interaction from gene $j$ to gene $i$, respectively. The gene activity pattern of this network at time $t$ can be expressed as a Boolean row vector $s_{t} = [s_{t}^0,...,s_{t}^{N-1}]$. A certain gene $i$ can either be active ($s_t^i=1$) or inactive ($s_t^i=-1$). The transition of state activity is modelled by the equation below
\begin{equation}
s_{t+\tau}=\sigma[\sum_{j=1}^{N}a_{ji}s_t^j]
\end{equation}
where $\sigma(x)$ equals 1 if $x>0$ and is 0 otherwise. 

\subsection{Fitness}
The fitness here evaluates the likelihood that an attractor is obtained when facing perturbations \cite{espinosa2010specialization}. In other words, Espinosa-Soto and Wagner imposed a bias of robustness on their gene regulatory network models in order to indirectly select modular networks. This is because modular networks can limit perturbations in a module so that the overall structure will not be heavily affected \cite{aderems2005sys}. That is, more modular networks are more robust. 

There are two or more stages in their experiments on discovering the conditions under which modularity starts emerging. In the first stage, gene regulatory networks are evolved under selective pressure towards regulating a particular gene activity pattern, while facing some perturbations. The original gene activity pattern before perturbation is called a target. In the second and further stages, networks are evolved under selective pressure to regulate new gene activity patterns, while preserving the ability to regulate the old patterns. In the particular case where there were two gene activity patterns, the first stage lasted for 500 generations and the second took another 1500 generations. 

The perturbations of targets are randomly generated in every generation when evaluating the fitness of gene regulatory networks. In Espinosa-Soto and Wagnerâ€™s experiments, a network would face 500 perturbations comprising different corrupted versions of gene activity patterns. Each gene will have a probability of 0.15 to be perturbed into its opposite activity. A further study was conducted to explore a sufficient number of perturbations in order to shorten the computational time while maintaining a similar eventual improved modularity. It was concluded that 75 or 100 perturbations would lead to the noteworthy emergence of modularity \cite{totten2015perturbation}. Therefore, 75 perturbations are undertaken for evaluating the fitness of each gene regulatory network in order to reduce the running time. 

Larson et al. applied another approach for evaluating the fitness of networks \cite{larson2016hotspot}. They generated a static set of perturbations at the beginning and utilised this same set of corrupted targets whenever network fitness was calculated. This method converts the original stochastic fitness evaluation into a deterministic one. That is, the evolutionary landscape of individuals under this fitness evaluation will remain unchanged in each generation. On contrast, Espinosa-Soto and Wagner's fitness evaluation will lead to the evolutionary landscape to shift every generation. 

The fitness value of a gene regulatory network reflects its robustness in recovering from various perturbations. The error function compares an attractor of the network dynamics to the original gene activity pattern. That is, a successful network is able to regulate a corrupted pattern to its initial form. Then, the Hamming Distance G between the attractor and the original pattern was calculated. Previous experiments indicated that it normally took fewer than 20 transitions to reach the attractor \cite{wagner1996model}. Thus, non-stable attractors are assumed to be those gene regulatory networks that take more than 20 steps to attain the stability, or are cyclically stable. They are treated to have a maximum Hamming distance $D_{max}$. 








